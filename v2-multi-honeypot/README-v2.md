Projet 3: Plateforme Multi-Honeypots (SSH, HTTP, FTP) avec Confinement et ELKCeci est la V2 du projet honeypot-elk, mise √† niveau pour inclure plusieurs services honeypot dans un seul conteneur modulaire.üöÄ Fonctionnalit√©s V2Plateforme Modulaire : Le conteneur honeypot-platform lance 3 services dans des threads s√©par√©s :Honeypot SSH (Port 2223): Bas√© sur paramiko, logue les tentatives d'authentification et les commandes.Honeypot HTTP (Port 8080): Bas√© sur Flask, logue toutes les requ√™tes (m√©thode, chemin, headers, data) et sert une fausse page "404 Not Found" Apache.Honeypot FTP (Port 2121): Bas√© sur pyftpdlib, logue les tentatives de connexion et sert une fausse banni√®re "Microsoft FTP Service".Journalisation Centralis√©e : Chaque service √©crit dans son propre fichier log JSON (ssh-honeypot.log, http-honeypot.log, ftp-honeypot.log) via un module shared_logger.Ingestion ELK Multi-Index : Logstash est configur√© pour lire les 3 fichiers de log et les envoyer vers des index Elasticsearch distincts (ex: honeypot-ssh-DATE, honeypot-http-DATE).Confinement Unifi√© :AppArmor : Un profil unique docker-honeypot-platform-profile confine le conteneur, en autorisant l'√©criture des 3 logs et les liaisons r√©seau.Seccomp : Le m√™me profil honeypot-seccomp.json bloque execve pour l'ensemble du conteneur.üèóÔ∏è Architecture des Services et PortsServicePort (H√¥te)Port (Conteneur)DescriptionIndex ELKhoneypot-platform222322(Attaque) Honeypot SSHhoneypot-ssh-*honeypot-platform808080(Attaque) Honeypot HTTPhoneypot-http-*honeypot-platform212121(Attaque) Honeypot FTPhoneypot-ftp-*kibana56015601(Interface Web) Kibanaelasticsearch92009200API Elasticsearchlogstash--Ingestion des logsüõ†Ô∏è Instructions d'InstallationPr√©requis : Docker, Docker Compose, AppArmor (identique √† la V1).Charger le nouveau Profil AppArmor :NOTE : Ceci est un NOUVEAU nom de profil. L'ancien n'est plus utilis√©.cd /chemin/vers/honeypot-elk-v2/
sudo ./scripts/load_apparmor.sh
Construire et D√©marrer la Pile :cd /chemin/vers/honeypot-elk-v2/
./scripts/build_up.sh
Tester les Honeypots (depuis une autre machine) :SSH : ssh -p 2223 utilisateur@VOTRE_IP_SERVEURHTTP : Ouvrez http://VOTRE_IP_SERVEUR:8080 dans un navigateur.FTP : ftp VOTRE_IP_SERVEUR 2121 (essayez de vous loguer)Acc√©der √† Kibana (http://VOTRE_IP_SERVEUR:5601) :Allez dans Management > Index Patterns.Vous devrez cr√©er 3 Index Patterns :honeypot-ssh-* (champ de temps: @timestamp)honeypot-http-* (champ de temps: @timestamp)honeypot-ftp-* (champ de temps: @timestamp)Allez dans Discover pour voir les logs arriver, en choisissant l'index pattern dans le coin sup√©rieur gauche.
